<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.vulnverify.web.dao.TImageMapper" >
  <resultMap id="BaseResultMap" type="com.vulnverify.web.model.TImage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id     column="IMAGE_ID" property="imageId" jdbcType="INTEGER" />
    <result column="IMAGE_UUID" property="imageUuid" jdbcType="VARCHAR" />
    <result column="IMAGE_NAME" property="imageName" jdbcType="VARCHAR" />
    <result column="OS" property="os" jdbcType="VARCHAR" />
    <result column="ENVIROMENT" property="enviroment" jdbcType="VARCHAR" />
    <result column="SOFTWARE" property="software" jdbcType="VARCHAR" />
    <result column="IMAGE_FILE_SIZE" property="imageFileSize" jdbcType="INTEGER" />
    <result column="IMAGE_FILE_PATH" property="imageFilePath" jdbcType="VARCHAR" />
    <result column="CONTAINER_FORMAT" property="containerFormat" jdbcType="VARCHAR" />
    <result column="DISK_FORMAT" property="diskFormat" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
    <result column="DESCRIPTION" property="description" jdbcType="VARCHAR" />
    <result column="CREATE_USER" property="createUser" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" />
    <result column="UPDATE_USER" property="updateUser" jdbcType="VARCHAR" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP" />
  </resultMap>
  <resultMap id="ImageView" type="com.vulnverify.web.model.view.ImageView">
    <id     column="IMAGE_ID"      jdbcType="INTEGER"   property="id" />
    <result column="SOFTWARE"    jdbcType="VARCHAR"   property="software" />
    <result column="OS"    jdbcType="VARCHAR"   property="os" />
    <result column="IMAGE_NAME" jdbcType="VARCHAR"   property="imageName" />
    <result column="IMAGE_FILE_SIZE"    jdbcType="VARCHAR"   property="fileSize1" />
    <result column="ENVIROMENT"       jdbcType="VARCHAR"   property="enviroment" />
    <result column="DESCRIPTION"  jdbcType="VARCHAR"   property="description" />
    <result column="CREATE_TIME"  jdbcType="TIMESTAMP" property="createTime1" />
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    IMAGE_ID, IMAGE_UUID, IMAGE_NAME, OS, ENVIROMENT, SOFTWARE, IMAGE_FILE_SIZE, IMAGE_FILE_PATH, 
    CONTAINER_FORMAT, DISK_FORMAT, STATUS, DESCRIPTION, CREATE_USER, CREATE_TIME, UPDATE_USER, 
    UPDATE_TIME
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from T_MIRROR_IMAGES
    where IMAGE_ID = #{imageId,jdbcType=INTEGER}
  </select>
  <!--分页查询列表-->
  <select id="getList" parameterType="map" resultMap="ImageView">
	  select IMAGE_ID,SOFTWARE,OS,IMAGE_NAME,IMAGE_FILE_SIZE,IMAGE_FILE_PATH,ENVIROMENT,DESCRIPTION,CREATE_TIME
	  from T_MIRROR_IMAGES
	  where 1=1
     	 <if test="imageName != null and imageName != ''" >
	      and  IMAGE_NAME like concat('%',#{imageName,jdbcType=VARCHAR},'%')
	     </if>
	      <if test="os != null and os != ''" >
	      and OS=#{os,jdbcType=VARCHAR}
	     </if>
  		order by IMAGE_ID DESC
  </select>
  <!--查询数量,根据uuid或name-->
  <select id="getCount" parameterType="map"  resultType="int">
	  select count(*)
	  from T_MIRROR_IMAGES
	  where 1=2
	  <if test="imageName != null and imageName != ''" >
	      or IMAGE_NAME =#{imageName,jdbcType=VARCHAR}
	   </if>
	  <if test="uuid != null and uuid != ''" >
	      or IMAGE_UUID =#{uuid,jdbcType=VARCHAR}
	  </if> 
  </select>
    <!--查询数量,根据uuid和status-->
  <select id="getCountByState" parameterType="map"  resultType="int">
	  select count(*)
	  from T_MIRROR_IMAGES
	  where 
          IMAGE_UUID =#{uuid,jdbcType=VARCHAR}
      and (`STATUS` !=#{state,jdbcType=VARCHAR}
      or `STATUS` IS NULL)
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from T_MIRROR_IMAGES
    where IMAGE_ID = #{imageId,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.vulnverify.web.model.TImage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into T_MIRROR_IMAGES (IMAGE_ID, IMAGE_UUID, IMAGE_NAME, 
      OS, ENVIROMENT, SOFTWARE, 
      IMAGE_FILE_SIZE, IMAGE_FILE_PATH, CONTAINER_FORMAT, 
      DISK_FORMAT, STATUS, DESCRIPTION, 
      CREATE_USER, CREATE_TIME
      <!-- , UPDATE_USER, UPDATE_TIME -->
      )
    values (#{imageId,jdbcType=INTEGER}, #{imageUuid,jdbcType=VARCHAR}, #{imageName,jdbcType=VARCHAR}, 
      #{os,jdbcType=VARCHAR}, #{enviroment,jdbcType=VARCHAR}, #{software,jdbcType=VARCHAR}, 
      #{imageFileSize,jdbcType=INTEGER}, #{imageFilePath,jdbcType=VARCHAR}, #{containerFormat,jdbcType=VARCHAR}, 
      #{diskFormat,jdbcType=VARCHAR}, #{status,jdbcType=VARCHAR}, #{description,jdbcType=VARCHAR}, 
      #{createUser,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}
      <!-- , #{updateUser,jdbcType=VARCHAR}, #{updateTime,jdbcType=TIMESTAMP} -->
      )
  </insert>
  <insert id="insertSelective" parameterType="com.vulnverify.web.model.TImage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into T_MIRROR_IMAGES
    <trim prefix="(" suffix=")" suffixOverrides="," >
<!--       <if test="imageId != null" >
        IMAGE_ID,
      </if> -->
      <if test="imageUuid != null" >
        IMAGE_UUID,
      </if>
      <if test="imageName != null" >
        IMAGE_NAME,
      </if>
      <if test="os != null" >
        OS,
      </if>
      <if test="enviroment != null" >
        ENVIROMENT,
      </if>
      <if test="software != null" >
        SOFTWARE,
      </if>
      <if test="imageFileSize != null" >
        IMAGE_FILE_SIZE,
      </if>
      <if test="imageFilePath != null" >
        IMAGE_FILE_PATH,
      </if>
      <if test="containerFormat != null" >
        CONTAINER_FORMAT,
      </if>
      <if test="diskFormat != null" >
        DISK_FORMAT,
      </if>
      <if test="status != null" >
        STATUS,
      </if>
      <if test="description != null" >
        DESCRIPTION,
      </if>
      <if test="createUser != null" >
        CREATE_USER,
      </if>
      <if test="createTime != null" >
        CREATE_TIME,
      </if>
<!--       <if test="updateUser != null" >
        UPDATE_USER,
      </if>
      <if test="updateTime != null" >
        UPDATE_TIME,
      </if> -->
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
<!--       <if test="imageId != null" >
        #{imageId,jdbcType=INTEGER},
      </if> -->
      <if test="imageUuid != null" >
        #{imageUuid,jdbcType=VARCHAR},
      </if>
      <if test="imageName != null" >
        #{imageName,jdbcType=VARCHAR},
      </if>
      <if test="os != null" >
        #{os,jdbcType=VARCHAR},
      </if>
      <if test="enviroment != null" >
        #{enviroment,jdbcType=VARCHAR},
      </if>
      <if test="software != null" >
        #{software,jdbcType=VARCHAR},
      </if>
      <if test="imageFileSize != null" >
        #{imageFileSize,jdbcType=INTEGER},
      </if>
      <if test="imageFilePath != null" >
        #{imageFilePath,jdbcType=VARCHAR},
      </if>
      <if test="containerFormat != null" >
        #{containerFormat,jdbcType=VARCHAR},
      </if>
      <if test="diskFormat != null" >
        #{diskFormat,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        #{status,jdbcType=VARCHAR},
      </if>
      <if test="description != null" >
        #{description,jdbcType=VARCHAR},
      </if>
      <if test="createUser != null" >
        #{createUser,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
<!--       <if test="updateUser != null" >
        #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if> -->
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.vulnverify.web.model.TImage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update T_MIRROR_IMAGES
    <set >
      <if test="imageUuid != null" >
        IMAGE_UUID = #{imageUuid,jdbcType=VARCHAR},
      </if>
      <if test="imageName != null" >
        IMAGE_NAME = #{imageName,jdbcType=VARCHAR},
      </if>
      <if test="os != null" >
        OS = #{os,jdbcType=VARCHAR},
      </if>
      <if test="enviroment != null" >
        ENVIROMENT = #{enviroment,jdbcType=VARCHAR},
      </if>
      <if test="software != null" >
        SOFTWARE = #{software,jdbcType=VARCHAR},
      </if>
      <if test="imageFileSize != null" >
        IMAGE_FILE_SIZE = #{imageFileSize,jdbcType=INTEGER},
      </if>
      <if test="imageFilePath != null" >
        IMAGE_FILE_PATH = #{imageFilePath,jdbcType=VARCHAR},
      </if>
      <if test="containerFormat != null" >
        CONTAINER_FORMAT = #{containerFormat,jdbcType=VARCHAR},
      </if>
      <if test="diskFormat != null" >
        DISK_FORMAT = #{diskFormat,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        STATUS = #{status,jdbcType=VARCHAR},
      </if>
      <if test="description != null" >
        DESCRIPTION = #{description,jdbcType=VARCHAR},
      </if>
<!--       <if test="createUser != null" >
        CREATE_USER = #{createUser,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      </if> -->
      <if test="updateUser != null" >
        UPDATE_USER = #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where IMAGE_ID = #{imageId,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.vulnverify.web.model.TImage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update T_MIRROR_IMAGES
    set IMAGE_UUID = #{imageUuid,jdbcType=VARCHAR},
      IMAGE_NAME = #{imageName,jdbcType=VARCHAR},
      OS = #{os,jdbcType=VARCHAR},
      ENVIROMENT = #{enviroment,jdbcType=VARCHAR},
      SOFTWARE = #{software,jdbcType=VARCHAR},
      IMAGE_FILE_SIZE = #{imageFileSize,jdbcType=INTEGER},
      IMAGE_FILE_PATH = #{imageFilePath,jdbcType=VARCHAR},
      CONTAINER_FORMAT = #{containerFormat,jdbcType=VARCHAR},
      DISK_FORMAT = #{diskFormat,jdbcType=VARCHAR},
      STATUS = #{status,jdbcType=VARCHAR},
      DESCRIPTION = #{description,jdbcType=VARCHAR},
<!--       CREATE_USER = #{createUser,jdbcType=VARCHAR},
      CREATE_TIME = #{createTime,jdbcType=TIMESTAMP}, -->
      UPDATE_USER = #{updateUser,jdbcType=VARCHAR},
      UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP}
    where IMAGE_ID = #{imageId,jdbcType=INTEGER}
  </update>
  <!--动态匹配查询-->
   <select id="selectMatch" resultMap="BaseResultMap" parameterType="com.vulnverify.web.model.TImage"  >
    select 
    <include refid="Base_Column_List" />
    from T_MIRROR_IMAGES
    <where>
 	  <if test="imageUuid != null" >
        IMAGE_UUID = #{imageUuid,jdbcType=VARCHAR}
      </if>
      <if test="imageName != null" >
       AND IMAGE_NAME = #{imageName,jdbcType=VARCHAR}
      </if>
      <if test="os != null" >
       AND OS = #{os,jdbcType=VARCHAR}
      </if>
      <if test="enviroment != null" >
       AND ENVIROMENT = #{enviroment,jdbcType=VARCHAR}
      </if>
      <if test="software != null" >
       AND SOFTWARE = #{software,jdbcType=VARCHAR}
      </if>
      <if test="imageFileSize != null" >
       AND IMAGE_FILE_SIZE = #{imageFileSize,jdbcType=INTEGER}
      </if>
      <if test="imageFilePath != null" >
       AND IMAGE_FILE_PATH = #{imageFilePath,jdbcType=VARCHAR}
      </if>
      <if test="containerFormat != null" >
       AND CONTAINER_FORMAT = #{containerFormat,jdbcType=VARCHAR}
      </if>
      <if test="diskFormat != null" >
       AND DISK_FORMAT = #{diskFormat,jdbcType=VARCHAR}
      </if>
      <if test="status != null" >
       AND STATUS = #{status,jdbcType=VARCHAR}
      </if>
      <if test="description != null" >
       AND DESCRIPTION = #{description,jdbcType=VARCHAR}
      </if>
      <if test="createUser != null" >
       AND CREATE_USER = #{createUser,jdbcType=VARCHAR}
      </if>
      <if test="createTime != null" >
       AND CREATE_TIME = #{createTime,jdbcType=TIMESTAMP}
      </if>
      <if test="updateUser != null" >
       AND UPDATE_USER = #{updateUser,jdbcType=VARCHAR}
      </if>
      <if test="updateTime != null" >
       AND UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP}
      </if>
    </where>
  </select>
  <!--动态匹配查询全部镜像-->
   <select id="selectAll" resultMap="BaseResultMap" >
    select 
    <include refid="Base_Column_List" />
    from T_MIRROR_IMAGES
  </select>
  <update id="updateByUUID" parameterType="com.vulnverify.web.model.TImage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update T_MIRROR_IMAGES
    <set >
      <if test="os != null" >
        OS = #{os,jdbcType=VARCHAR},
      </if>
      <if test="enviroment != null" >
        ENVIROMENT = #{enviroment,jdbcType=VARCHAR},
      </if>
      <if test="software != null" >
        SOFTWARE = #{software,jdbcType=VARCHAR},
      </if>
      <if test="imageFileSize != null" >
        IMAGE_FILE_SIZE = #{imageFileSize,jdbcType=INTEGER},
      </if>
      <if test="imageFilePath != null" >
        IMAGE_FILE_PATH = #{imageFilePath,jdbcType=VARCHAR},
      </if>
      <if test="containerFormat != null" >
        CONTAINER_FORMAT = #{containerFormat,jdbcType=VARCHAR},
      </if>
      <if test="diskFormat != null" >
        DISK_FORMAT = #{diskFormat,jdbcType=VARCHAR},
      </if>
      <if test="status != null" >
        STATUS = #{status,jdbcType=VARCHAR},
      </if>
      <if test="description != null" >
        DESCRIPTION = #{description,jdbcType=VARCHAR},
      </if>
<!--       <if test="createUser != null" >
        CREATE_USER = #{createUser,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      </if> -->
      <if test="updateUser != null" >
        UPDATE_USER = #{updateUser,jdbcType=VARCHAR},
      </if>
      <if test="updateTime != null" >
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where IMAGE_UUID = #{imageUuid,jdbcType=VARCHAR}
  </update>
</mapper>